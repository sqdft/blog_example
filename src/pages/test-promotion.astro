---
import { getSortedPosts } from "../utils/content-utils";

const posts = await getSortedPosts();
---

<html>
<head>
    <title>推广卡片测试</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .post { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        .has-card { background: #e8f5e9; }
        .no-card { background: #ffebee; }
    </style>
</head>
<body>
    <h1>推广卡片配置测试</h1>
    
    {posts.map(post => (
        <div class:list={["post", post.data.promotionCard ? "has-card" : "no-card"]}>
            <h2>{post.data.title}</h2>
            <p><strong>Slug:</strong> {post.slug}</p>
            <p><strong>发布日期:</strong> {post.data.published.toISOString()}</p>
            <p><strong>置顶:</strong> {post.data.pinned ? "是" : "否"}</p>
            
            {post.data.promotionCard ? (
                <div style="background: white; padding: 10px; margin-top: 10px;">
                    <p><strong>✅ 推广卡片配置:</strong></p>
                    <ul>
                        <li><strong>标题:</strong> {post.data.promotionCard.title}</li>
                        <li><strong>描述:</strong> {post.data.promotionCard.description}</li>
                        <li><strong>图片:</strong> {post.data.promotionCard.image}</li>
                        <li><strong>链接:</strong> {post.data.promotionCard.link}</li>
                    </ul>
                </div>
            ) : (
                <p><strong>❌ 无推广卡片配置</strong></p>
            )}
        </div>
    ))}
</body>
</html>
